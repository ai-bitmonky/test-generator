âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
[dotenv@17.2.3] injecting env (4) from .env.local -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
ğŸš€ Complete Enrichment Pipeline for Existing Questions

ğŸ“š Subject: Chemistry
â±ï¸  Delay: 6000ms between calls
ğŸ“Š Max words per field: 100

âœ¨ ALL FEATURES ACTIVE:
   â€¢ Question validation (options, answer key, multi-part questions)
   â€¢ Completeness verification (no ambiguity, all data provided)
   â€¢ Solution verification (matches correct answer)
   â€¢ Text enrichment (strategy, expert_insight, key_facts)
   â€¢ SVG generation for missing figures
   â€¢ 100-word limits with auto-condensing
   â€¢ HTML entity cleanup in options
   â€¢ Combined word separation
   â€¢ Figure warning removal

======================================================================

ğŸ“¥ Fetching questions needing enrichment...

   Total Chemistry questions: 124
   Need enrichment: 47 (37.9%)


[1/47] Processing question 0cd7f7d6...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[2/47] Processing question 1b537f3f...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Equilibrium diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[3/47] Processing question 2427a722...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[4/47] Processing question 257cd00a...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[5/47] Processing question 2650f255...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (circuit)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[6/47] Processing question 2d84df2c...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[7/47] Processing question 38ab9cbc...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[8/47] Processing question 4000f974...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[9/47] Processing question 412603e3...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Other (step-wise chemical diagram))
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[10/47] Processing question 48b553cd...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

ğŸ“Š Progress: 10/47 (21.3%)
   Enriched: 10, Failed: 0, Skipped: 0
   Text enriched: 0, SVGs generated: 10


[11/47] Processing question 5821bc9b...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[12/47] Processing question 643b1dd6...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âš ï¸  SVG generation failed
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 1 fields

[13/47] Processing question 65cd53ce...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[14/47] Processing question 67accf6e...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[15/47] Processing question 695cf0ab...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[16/47] Processing question 73a7b26e...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (other)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[17/47] Processing question 758f06c1...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[18/47] Processing question 758fdeb6...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[19/47] Processing question 80cddb30...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[20/47] Processing question 818a1f6c...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Other (Conceptual Diagram))
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

ğŸ“Š Progress: 20/47 (42.6%)
   Enriched: 20, Failed: 0, Skipped: 0
   Text enriched: 0, SVGs generated: 19


[21/47] Processing question 848c49d1...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[22/47] Processing question 849410ca...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular/3D_Diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[23/47] Processing question 85b29b2e...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
   âš ï¸  Error, retrying in 15s...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[24/47] Processing question 8937807a...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[25/47] Processing question 8b5d27ec...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[26/47] Processing question 910329b4...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[27/47] Processing question 95e5690b...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Circuit/Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[28/47] Processing question a1b0741c...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âŒ Update failed: TypeError: fetch failed

[29/47] Processing question a3728b19...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âŒ Update failed: TypeError: fetch failed

[30/47] Processing question af058ec7...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (circuit)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

ğŸ“Š Progress: 30/47 (63.8%)
   Enriched: 28, Failed: 2, Skipped: 0
   Text enriched: 0, SVGs generated: 29


[31/47] Processing question c1083611...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Other (Diagram))
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[32/47] Processing question c25d5f79...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Circuit)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[33/47] Processing question c37df8b6...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[34/47] Processing question cb492f13...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[35/47] Processing question cddab138...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Vector diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[36/47] Processing question d646232d...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (2D diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[37/47] Processing question d65165c0...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[38/47] Processing question d75cb169...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (3D_DIAGRAM)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[39/47] Processing question d90f6f93...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric Diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[40/47] Processing question de38d4e4...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular/Chemical Reaction Diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

ğŸ“Š Progress: 40/47 (85.1%)
   Enriched: 38, Failed: 2, Skipped: 0
   Text enriched: 0, SVGs generated: 39


[41/47] Processing question e2b542c3...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[42/47] Processing question e2e47f31...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[43/47] Processing question eb2e0f5b...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular Diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[44/47] Processing question ed0626da...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (circuit)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[45/47] Processing question edd8a48d...
   ğŸ” Validating question format...
      âš ï¸  Found 1 format issue(s):
         - Multi-part question but options don't address all parts
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Molecular diagram)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[46/47] Processing question f0643972...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Circuit)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

[47/47] Processing question f631e975...
   ğŸ” Validating question format...
      âœ… Format valid
   ğŸ” Checking question completeness...
      âœ… Question complete
   ğŸ” Verifying solution matches answer key...
      âœ… Solution matches answer key
   ğŸ¨ Checking for missing figures...
      âœ… SVG generated (Geometric)
   ğŸ§¹ Removing figure warnings...
      âœ… Warnings removed
   âœ… Updated with 2 fields

======================================================================

âœ… Enrichment Complete!

ğŸ“Š Final Statistics:
   Total processed: 47
   Successfully enriched: 45 (95.7%)
   Text enrichments: 0
   SVGs generated: 46
   Failed: 2 (4.3%)
   Skipped: 0 (0.0%)
